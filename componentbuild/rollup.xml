<?xml version="1.0" encoding="UTF-8"?>

<project name="YuiRollupTargets">

    <import file="${builddir}/common.xml" description="Targets common to Rollup/Module" />

    <target name="build" description="Create component.js">
        <subant target="all" inheritall="false" >
            <filelist dir="${buildfile.dir}" files="${component.rollup.modules.buildfiles}" />
            <property name="rollup" value="true" />
            <property name="rollup.builddir" value="${component.builddir}" />
            <property name="rollup.component.basefilename" value="${component.basefilename}" />
        </subant>
        <fixcrlf srcdir="${component.builddir}" includes="${component.basefilename}.js" eol="${buildfiles.eol}" />
        <fixcrlf srcdir="${component.builddir}" includes="${component.basefilename}-debug.js" eol="${buildfiles.eol}" />
    </target>

    <target name="register" unless="skip.register">
        <addrollup module="${component.module}" file="${component.builddir}/${component.basefilename}.js" details="${component.details.hash}" />
        <addrollup module="${component.module}" file="${component.builddir}/${component.basefilename}-debug.js" details="${component.details.hash}" />
    </target>

    <target name="deploy">
        <!-- TODO -->
    </target>
</project>